<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;400&display=swap" rel="stylesheet">
    <!-- App Core CSS -->
    <link rel="stylesheet" href="assets/css/app.css">
    <!-- Stripe -->
    <script src="https://js.stripe.com/v3/"></script>
    <title>Express Checkout</title>
</head>

<body>
    <div class="container my-3">
        <div class="content">
            <!-- Navigation -->
            <div class="d-flex align-items-center">
                <a href="index.html" role="button" class="btn btn-sm rounded-circle d-grid">
                    <i class="bi bi-chevron-left m-auto"></i>
                </a>
                <h1 class="fw-bold text-center fs-6 my-0 mx-auto">Checkout</h1>
            </div>
            <!-- /.Navigation -->

            <!-- Payment Methods -->
            <div class="d-block mt-3">
                <!-- Step Progress Bar -->
                <div class="row justify-content-between align-items-center py-3">
                    <div class="col-4 d-flex justify-content-around step-indicator active">
                        <div class="d-block text-center">
                            <span class="step-button shadow-sm">
                                <i class="bi bi-credit-card"></i>
                            </span>
                            <small class="fw-bold">Pay</small>
                        </div>
                    </div>
                    <div class="col-4 d-flex justify-content-around step-indicator">
                        <div class="d-block text-center">
                            <span class="step-button shadow-sm">
                                <i class="bi bi-qr-code-scan"></i>
                            </span>
                            <small class="fw-bold">QR Scan</small>
                        </div>
                    </div>
                    <div class="col-4 d-flex justify-content-around step-indicator">
                        <div class="d-block text-center">
                            <span class="step-button shadow-sm">
                                <i class="bi bi-check2-circle"></i>
                            </span>
                            <small class="fw-bold">Done</small>
                        </div>
                    </div>
                </div>
                <!-- /.Step Progress Bar -->

                <!-- Payment Methods -->
                <div class="tab" id="payment-method">
                    <div class="container">
                        <h6 class="text-start fw-bold fs-6 ms-3">Payment Methods</h6>
                    </div>
                    <hr class="bg-white my-0">
                    <div class="d-flex align-items-center justify-content-evenly w-100 my-3">
                        <ul class="nav nav-tabs list-inline option-switch border-0 h-auto m-0 p-1" role="tablist">
                            <li class="nav-item list-inline-item" role="presentation">
                                <a href="#" class="nav-link active toggle-option py-2" id="credit-card-tab" data-bs-toggle="tab" data-bs-target="#credit-card" type="button" role="tab" aria-controls="credit-card" aria-selected="true">
                                    <img src="assets/images/app/accept-cards.svg" height="21" width="63" alt="Credit Cards" class="img-responsive">
                                </a>
                            </li>
                            <li class="nav-item list-inline-item" role="presentation">
                                <a href="#" class="nav-link toggle-option" id="one-money-tab" data-bs-toggle="tab" data-bs-target="#one-money" type="button" role="tab" aria-controls="one-money" aria-selected="false">
                                    <img src="assets/images/app/one-money.png" alt="one-money">
                                </a>
                            </li>
                            <li class="nav-item list-inline-item" role="presentation">
                                <a href="#" class="nav-link toggle-option py-2" id="ecocash-wallet-tab" data-bs-toggle="tab" data-bs-target="#ecocash-wallet" type="button" role="tab" aria-controls="ecocash-wallet" aria-selected="false">
                                    <img src="assets/images/app/ecocash.svg" height="15" width="79" alt="Ecocash" class="img-responsive">
                                </a>
                            </li>
                        </ul>
                    </div>
                    <!-- Checkout Form -->
                    <form action="" method="post" id="payment-form" class="row g-3 needs-validation" novalidate>
                        <div class="tab-content mt-4">
                            <!-- Credit Card -->
                            <div class="tab-pane fade show active" id="credit-card" role="tabpanel" aria-labelledby="credit-card-tab">
                                <div class="container my-3">
                                    <div class="row g-3" id="credit-debit-card">
                                        <!-- Card Info -->
                                        <div class="col-12">
                                            <div id="payment-element">
                                                <!-- Elements will create form elements here -->
                                            </div>
                                            <div id="error-message">
                                                <!-- Display error message to your customers here -->
                                            </div>
                                        </div>
                                        <!-- /.Card Info -->

                                        <div class="form-check mb-0">
                                            <input class="form-check-input" type="checkbox" value="" id="primary-card">
                                            <label class="form-check-label" for="primary-card">
                                                Make this primary card
                                            </label>
                                        </div>
                                        <div class="form-check mt-0">
                                            <input class="form-check-input" type="checkbox" value="" id="save-payment-details">
                                            <label class="form-check-label" for="save-payment-details">
                                                Save my payment details for future purchases
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- /.Credit Card -->

                            <!-- one-money -->
                            <div class="tab-pane fade" id="one-money" role="tabpanel" aria-labelledby="one-money-tab">
                                <div class="row g-3 p-3">
                                    <!-- Mobile Wallet -->
                                    <div class="col-12">
                                        <label for="mobile-number" class="mb-1">Mobile number</label>
                                        <input type="tel" name="mobile-number" id="mobile-number" class="form-control" placeholder="07xxxxxxxx" required>
                                    </div>
                                    <!-- /.Mobile Wallet -->

                                    <div class="form-check mb-0">
                                        <input class="form-check-input" type="checkbox" value="" id="primary-wallet">
                                        <label class="form-check-label" for="primary-wallet">
                                            Make this primary mobile wallet
                                        </label>
                                    </div>
                                    <div class="form-check mt-0">
                                        <input class="form-check-input" type="checkbox" value="" id="save-wallet-details">
                                        <label class="form-check-label" for="save-wallet-details">
                                            Save my payment details for future purchases
                                        </label>
                                    </div>
                                </div>
                            </div>
                            <!-- one-money -->

                            <!-- Ecocash Wallet -->
                            <div class="tab-pane fade" id="ecocash-wallet" role="tabpanel" aria-labelledby="ecocash-wallet-tab">
                                <div class="row g-3 p-3">
                                    <!-- Mobile Wallet -->
                                    <div class="col-12">
                                        <label for="mobile-number" class="mb-1">Mobile number</label>
                                        <input type="tel" name="mobile-number" id="mobile-number" class="form-control" placeholder="07xxxxxxxx" required>
                                    </div>
                                    <!-- /.Mobile Wallet -->

                                    <div class="form-check mb-0">
                                        <input class="form-check-input" type="checkbox" value="" id="primary-wallet">
                                        <label class="form-check-label" for="primary-wallet">
                                            Make this primary mobile wallet
                                        </label>
                                    </div>
                                    <div class="form-check mt-0">
                                        <input class="form-check-input" type="checkbox" value="" id="save-wallet-details">
                                        <label class="form-check-label" for="save-wallet-details">
                                            Save my payment details for future purchases
                                        </label>
                                    </div>
                                </div>
                            </div>
                            <!-- Ecocash Wallet -->
                        </div>

                        <!-- Navigation Buttons -->
                        <div class="col-12 my-3">
                            <div class="d-flex align-items-center justify-content-between">
                                <div id="continue-shopping-btn">
                                    <a href="index.html" class="btn btn-outline-dark btn-sm rounded-pill fs-6 d-flex align-items-center justify-content">
                                        <i class="bi bi-chevron-left me-1"></i> <span id="prev-btn">Continue shopping</span>
                                    </a>
                                </div>
                                <button class="btn bg-dark btn-sm rounded-pill fs-6 d-flex align-items-center justify-content-center text-white" id="next-btn" onclick="nextPrev(1)">
                                    <span id="submit" class="text-white">Make Payment</span> <i class="bi bi-chevron-right ms-1"></i>
                                </button>
                            </div>
                        </div>
                        <!-- /.Navigation Buttons -->
                    </form>
                    <!-- /.Checkout Form -->
                </div>
                <!-- /.Payment Methods -->

                <!-- Scan QR Code -->
                <div class="tab" id="qr-code-scan">
                    <div class="container text-center">
                        <h6 class="text-start fw-bold fs-6 ms-3">QR Code Scan</h6>
                        <i class="bi bi-check-circle-fill fs-1"></i>
                        <h6 class="fs-5 fw-bold">Payment Received!</h6>
                        <small class="text-muted lh-sm">
                            On your way out, show this QR code to a staff member
                            so they can approve your purchase.  
                        </small>
                        <div class="my-3">
                            <img src="assets/images/app/qr-code-placeholder.png" alt="Qr-Code" class="img-fluid">
                        </div>
                    </div>
                </div>
                <!-- /.Scan QR Code -->

                <!-- Confirm Payment -->
                <div class="tab" id="confirm-payment">
                    <div class="container text-center">
                        <h6 class="text-start fw-bold fs-6 ms-3">QR Code Scan</h6>
                        <i class="bi bi-check-circle-fill fs-1"></i>
                        <h6 class="fs-5 fw-bold">Payment Confirmed!</h6>
                        <small class="text-muted lh-sm">
                            Your payment was successful. Thank you for shopping with us. 
                        </small>
                        <div class="my-3">
                            <img src="assets/images/app/purchase-successful.png" alt="Payment Successful" class="img-fluid">
                        </div>
                        <div class="d-flex align-items-center justify-content-evenly">
                            <button class="btn btn-light rounded-pill px-3 fs-6">
                                <i class="bi bi-chevron-left me-1"></i> Back to Home
                            </button>
                            <button class="btn btn-dark rounded-pill px-3 fs-6">
                                View Order History
                            </button>
                        </div>
                    </div>
                    <!-- /.Confirm Payment -->
                </div>
                <!-- /.Payment Methods -->
            </div>
        </div>

        <!-- JQuery -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <!-- Bootstrap JS -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
        <!-- App Core CSS -->
        <script src="assets/js/app.js"></script>
        <script>
            // Current tab is set to be the first tab (0)
            let currentTab = 2;

            // Display the current tab
            showTab(currentTab);

            function showTab(n) {
                // This function will display the specified tab of the form ...
                var x = document.getElementsByClassName('tab');

                x[n].style.display = 'block';
                // ... and run a function that displays the correct step indicator:
                fixStepIndicator(n)
            }

            function nextPrev(n) {
                // This function will figure out which tab to display
                var x = document.getElementsByClassName('tab');

                // Exit the function if any field in the current tab is invalid:
                if (n == 1 && !validateForm()) return false;

                // Hide the current tab:
                x[currentTab].style.display = 'none';

                // Increase or decrease the current tab by 1:
                currentTab += n;

                // if you have reached the end of the form... :

                if (currentTab >= x.length) {
                    // Make the last tab show
                    showTab(2);

                    //...the form gets submitted:
                    $('#payment-form').on('submit', function(e) {
                        e.preventDefault();
                        var form_data = $(this).serialize();
                        processingAlert('Please wait while we process your order.');
                    });
                    return false;
                }

                // Otherwise, display the correct tab:
                showTab(currentTab);

                // Preview entered details
                checkoutPreview();
            }

            function validateForm() {
                // This function deals with validation of the form fields
                var x, y, i, valid = true;
                x = document.getElementsByClassName('tab');
                y = x[currentTab].getElementsByClassName('form-control');
                // A loop that checks every input field in the current tab:
                for (i = 0; i < y.length; i++) {
                    // If a field is empty...
                    if (y[i].value == '') {
                        // add an "invalid" class to the field:
                        y[i].className += ' invalid';
                        // and set the current valid status to false:
                        valid = false;
                    }
                }
                // If the valid status is true, mark the step as finished and valid:
                if (valid == true) {
                    document.getElementsByClassName('step-indicator')[currentTab].className += ' finish';
                }
                return valid; // return the valid status
            }

            function fixStepIndicator(n) {
                // This function removes the "active" class of all steps...
                var i, x = document.getElementsByClassName('step-indicator');
                for (i = 0; i < x.length; i++) {
                    x[i].className = x[i].className.replace(' active', '');
                    x[i].className = x[i].className.replace(' completed', '');
                }
                //... and adds the "active" class to the current step:
                x[n].className += ' active';

                //... and adds the "completed" class to the previous step:
                for (i = 1; i < x.length; i++) {
                    if (n - i >= 0) {
                        x[n - i].className += ' completed';
                    }

                    // Preview entered details
                    checkoutPreview();
                }
            }

            function payment() {
                $.ajax({
                    method: 'post',
                    url: 'https://www.paynow.co.zw/interface/remotetransaction/?method=ecocash&phone=0776021140&amount=38.38',
                    dataType: 'jsonp',
                    async: true,
                    crossDomain: true,
                    success: function(data) {
                        let results = data;
                        console.log(data);
                    },
                    error: function() {
                        console.log('Hmmm... looks like you\'re nolonger connected.');
                    }
                });
            }

            function checkoutPreview() {
                // User billing info
                var mobile_number = $('#mobile-number').val();

                // Show recipient's info
                document.getElementById('mobile-number').innerHTML = mobile_number;
            }

            /*** Stripe ***/
            // Create an instance of the Stripe object with your publishable API key
            var stripe = Stripe('pk_test_51KWbuMDpjfWymV8pEBT5XDDjZlqktm6ZCL90PkupBO6bqXiAxp7gWbzz005WvW8Sg2grE69v1T6l9jfVgiSfqJ1j00O90a12CU');

            const options = {
                clientSecret: '{{CLIENT_SECRET}}',
                // Fully customizable with appearance API.
                appearance: {
                    theme: 'stripe'
                },
            };

            // Set up Stripe.js and Elements to use in checkout form, passing the client secret obtained in step 2
            const elements = stripe.elements(options);

            // Create and mount the Payment Element
            const paymentElement = elements.create('payment');
            paymentElement.mount('#payment-element');
            /*** /.Stripe ***/
        </script>
</body>

</html>